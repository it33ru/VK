{"version":3,"sources":["../../../../src/components/UsersStack/UsersStack.tsx"],"names":["React","getClassName","classNames","createMasks","useBrowserInfo","IOS","useIsomorphicLayoutEffect","UsersStack","props","platform","platformVersion","className","photos","visibleCount","size","layout","children","restProps","othersCount","Math","max","length","canShowOthers","photosShown","slice","canUseClipPath","major","map","photo","i","backgroundImage","defaultProps","memo"],"mappings":";;AAAA,OAAOA,KAAP,MAA0C,OAA1C;AACA,OAAOC,YAAP,MAAyB,4BAAzB;AACA,OAAOC,UAAP,MAAuB,sBAAvB;AACA,SAASC,WAAT,QAA4B,SAA5B;AACA,SAASC,cAAT,QAA+B,4BAA/B;AACA,SAASC,GAAT,QAAoB,oBAApB;AACA,SAASC,yBAAT,QAA0C,qCAA1C;;AAsBA,IAAMC,UAA+B,GAAG,SAAlCA,UAAkC,CAACC,KAAD,EAAW;AAAA,wBACXJ,cAAc,EADH;AAAA,MACzCK,QADyC,mBACzCA,QADyC;AAAA,MAC/BC,eAD+B,mBAC/BA,eAD+B;;AAAA,MAEzCC,SAFyC,GAEiCH,KAFjC,CAEzCG,SAFyC;AAAA,MAE9BC,MAF8B,GAEiCJ,KAFjC,CAE9BI,MAF8B;AAAA,MAEtBC,YAFsB,GAEiCL,KAFjC,CAEtBK,YAFsB;AAAA,MAERC,IAFQ,GAEiCN,KAFjC,CAERM,IAFQ;AAAA,MAEFC,MAFE,GAEiCP,KAFjC,CAEFO,MAFE;AAAA,MAEMC,QAFN,GAEiCR,KAFjC,CAEMQ,QAFN;AAAA,MAEmBC,SAFnB,4BAEiCT,KAFjC;;AAIjDF,EAAAA,yBAAyB,CAAC,YAAM;AAC9BH,IAAAA,WAAW;AACZ,GAFwB,EAEtB,EAFsB,CAAzB;AAIA,MAAMe,WAAW,GAAGC,IAAI,CAACC,GAAL,CAAS,CAAT,EAAYR,MAAM,CAACS,MAAP,GAAgBR,YAA5B,CAApB;AACA,MAAMS,aAAa,GAAGJ,WAAW,GAAG,CAAd,IAAmBJ,IAAI,KAAK,GAAlD;AAEA,MAAMS,WAAW,GAAGX,MAAM,CAACY,KAAP,CAAa,CAAb,EAAgBX,YAAhB,CAApB;AAEA,MAAIY,cAAc,GAAG,IAArB;;AACA,MAAIhB,QAAQ,KAAKJ,GAAjB,EAAsB;AACpBoB,IAAAA,cAAc,GAAGf,eAAe,IAAIA,eAAe,CAACgB,KAAhB,IAAyB,EAA7D;AACD;;AAED,sBACE,wCACMT,SADN;AAEE,IAAA,SAAS,EACPf,UAAU,CACRD,YAAY,CAAC,YAAD,EAAeQ,QAAf,CADJ,EAERE,SAFQ,6BAGYG,IAHZ,2BAISC,MAJT,GAKR;AACE,4BAAsBO,aADxB;AAEE,4BAAsB,CAACG;AAFzB,KALQ;AAHd,mBAeE;AAAK,IAAA,SAAS,EAAC;AAAf,KACGF,WAAW,CAACI,GAAZ,CAAgB,UAACC,KAAD,EAAQC,CAAR,EAAc;AAC7B,wBACE;AACE,MAAA,GAAG,EAAEA,CADP;AAEE,MAAA,SAAS,EAAC,mBAFZ;AAGE,MAAA,KAAK,EAAE;AAAEC,QAAAA,eAAe,gBAASF,KAAT;AAAjB;AAHT,MADF;AAOD,GARA,CADH,EAWGN,aAAa,iBACd;AAAK,IAAA,SAAS,EAAEpB,UAAU,CAAC,mBAAD,EAAsB,2BAAtB;AAA1B,gBACOgB,WADP,EAZF,CAfF,EA+BGF,QAAQ,iBACT;AAAK,IAAA,SAAS,EAAC;AAAf,KACGA,QADH,CAhCF,CADF;AAuCD,CAzDD;;AA2DAT,UAAU,CAACwB,YAAX,GAA0B;AACxBnB,EAAAA,MAAM,EAAE,EADgB;AAExBE,EAAAA,IAAI,EAAE,GAFkB;AAGxBD,EAAAA,YAAY,EAAE,CAHU;AAIxBE,EAAAA,MAAM,EAAE;AAJgB,CAA1B;AAOA,4BAAef,KAAK,CAACgC,IAAN,CAAWzB,UAAX,CAAf","sourcesContent":["import React, { FC, HTMLAttributes } from 'react';\nimport getClassName from '../../helpers/getClassName';\nimport classNames from '../../lib/classNames';\nimport { createMasks } from './masks';\nimport { useBrowserInfo } from '../../hooks/useBrowserInfo';\nimport { IOS } from '../../lib/platform';\nimport { useIsomorphicLayoutEffect } from '../../lib/useIsomorphicLayoutEffect';\n\nexport interface UsersStackProps extends HTMLAttributes<HTMLDivElement> {\n  /**\n   * Массив ссылок на фотографии\n   */\n  photos?: string[];\n  /**\n   * Размер аватарок\n   */\n  size?: 's' | 'm';\n  /**\n   * Вертикальный режим рекомендуется использовать с размером `m`\n   */\n  layout?: 'vertical' | 'horizontal';\n  /**\n   * Количество аватарок, которые будут показаны.\n   * Если в массиве `photos` больше элементов и используется размер `m`, то будет показано количество остальных элементов\n   */\n  visibleCount?: number;\n}\n\nconst UsersStack: FC<UsersStackProps> = (props) => {\n  const { platform, platformVersion } = useBrowserInfo();\n  const { className, photos, visibleCount, size, layout, children, ...restProps } = props;\n\n  useIsomorphicLayoutEffect(() => {\n    createMasks();\n  }, []);\n\n  const othersCount = Math.max(0, photos.length - visibleCount);\n  const canShowOthers = othersCount > 0 && size === 'm';\n\n  const photosShown = photos.slice(0, visibleCount);\n\n  let canUseClipPath = true;\n  if (platform === IOS) {\n    canUseClipPath = platformVersion && platformVersion.major >= 12;\n  }\n\n  return (\n    <div\n      {...restProps}\n      className={\n        classNames(\n          getClassName('UsersStack', platform),\n          className,\n          `UsersStack--size-${size}`,\n          `UsersStack--l-${layout}`,\n          {\n            'UsersStack--others': canShowOthers,\n            'UsersStack--simple': !canUseClipPath,\n          },\n        )\n      }\n    >\n      <div className=\"UsersStack__photos\">\n        {photosShown.map((photo, i) => {\n          return (\n            <div\n              key={i}\n              className=\"UsersStack__photo\"\n              style={{ backgroundImage: `url(${photo})` }}\n            />\n          );\n        })}\n\n        {canShowOthers &&\n        <div className={classNames('UsersStack__photo', 'UsersStack__photo--others')}>\n          {`+${othersCount}`}\n        </div>}\n      </div>\n      {children &&\n      <div className=\"UsersStack__text\">\n        {children}\n      </div>\n      }\n    </div>\n  );\n};\n\nUsersStack.defaultProps = {\n  photos: [],\n  size: 's',\n  visibleCount: 3,\n  layout: 'horizontal',\n};\n\nexport default React.memo(UsersStack);\n"],"file":"UsersStack.js"}