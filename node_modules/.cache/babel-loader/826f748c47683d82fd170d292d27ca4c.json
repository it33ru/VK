{"ast":null,"code":"!function (e, n) {\n  \"object\" == typeof exports && \"undefined\" != typeof module ? n(exports) : \"function\" == typeof define && define.amd ? define([\"exports\"], n) : n((e = e || self).vkBridge = {});\n}(this, function (e) {\n  \"use strict\";\n\n  var u = function () {\n    return (u = Object.assign || function (e) {\n      for (var n, t = 1, o = arguments.length; t < o; t++) for (var r in n = arguments[t]) Object.prototype.hasOwnProperty.call(n, r) && (e[r] = n[r]);\n\n      return e;\n    }).apply(this, arguments);\n  };\n\n  function a() {\n    for (var e = 0, n = 0, t = arguments.length; n < t; n++) e += arguments[n].length;\n\n    var o = Array(e),\n        r = 0;\n\n    for (n = 0; n < t; n++) for (var p = arguments[n], i = 0, u = p.length; i < u; i++, r++) o[r] = p[i];\n\n    return o;\n  }\n\n  function d(p, e) {\n    var o,\n        r,\n        i = (o = {\n      current: 0,\n      next: function () {\n        return ++this.current;\n      }\n    }, r = {}, {\n      add: function (e, n) {\n        var t = null != n ? n : o.next();\n        return r[t] = e, t;\n      },\n      resolve: function (e, n, t) {\n        var o = r[e];\n        o && (t(n) ? o.resolve(n) : o.reject(n), r[e] = null);\n      }\n    });\n    return e(function (e) {\n      if (e.detail && e.detail.data && \"request_id\" in e.detail.data) {\n        var n = e.detail.data,\n            t = n.request_id,\n            o = function (e, n) {\n          var t = {};\n\n          for (var o in e) Object.prototype.hasOwnProperty.call(e, o) && n.indexOf(o) < 0 && (t[o] = e[o]);\n\n          if (null != e && \"function\" == typeof Object.getOwnPropertySymbols) {\n            var r = 0;\n\n            for (o = Object.getOwnPropertySymbols(e); r < o.length; r++) n.indexOf(o[r]) < 0 && Object.prototype.propertyIsEnumerable.call(e, o[r]) && (t[o[r]] = e[o[r]]);\n          }\n\n          return t;\n        }(n, [\"request_id\"]);\n\n        t && i.resolve(t, o, function (e) {\n          return !(\"error_type\" in e);\n        });\n      }\n    }), function (o, r) {\n      return void 0 === r && (r = {}), new Promise(function (e, n) {\n        var t = i.add({\n          resolve: e,\n          reject: n\n        }, r.request_id);\n        p(o, u(u({}, r), {\n          request_id: t\n        }));\n      });\n    };\n  }\n\n  var n = \"undefined\" != typeof window,\n      s = Boolean(n && window.AndroidBridge),\n      f = Boolean(n && window.webkit && window.webkit.messageHandlers && window.webkit.messageHandlers.VKWebAppClose),\n      l = n && !s && !f,\n      t = l && /(^\\?|&)vk_platform=mobile_web(&|$)/.test(location.search),\n      b = l ? \"message\" : \"VKWebAppEvent\",\n      c = a([\"VKWebAppInit\", \"VKWebAppGetCommunityAuthToken\", \"VKWebAppAddToCommunity\", \"VKWebAppAddToHomeScreenInfo\", \"VKWebAppClose\", \"VKWebAppCopyText\", \"VKWebAppGetUserInfo\", \"VKWebAppSetLocation\", \"VKWebAppSendToClient\", \"VKWebAppGetClientVersion\", \"VKWebAppGetPhoneNumber\", \"VKWebAppGetEmail\", \"VKWebAppGetGroupInfo\", \"VKWebAppGetGeodata\", \"VKWebAppGetCommunityToken\", \"VKWebAppSetTitle\", \"VKWebAppGetAuthToken\", \"VKWebAppCallAPIMethod\", \"VKWebAppJoinGroup\", \"VKWebAppLeaveGroup\", \"VKWebAppAllowMessagesFromGroup\", \"VKWebAppDenyNotifications\", \"VKWebAppAllowNotifications\", \"VKWebAppOpenPayForm\", \"VKWebAppOpenApp\", \"VKWebAppShare\", \"VKWebAppShowWallPostBox\", \"VKWebAppScroll\", \"VKWebAppShowOrderBox\", \"VKWebAppShowLeaderBoardBox\", \"VKWebAppShowInviteBox\", \"VKWebAppShowRequestBox\", \"VKWebAppAddToFavorites\", \"VKWebAppShowCommunityWidgetPreviewBox\", \"VKWebAppShowStoryBox\", \"VKWebAppSendToClient\", \"VKWebAppStorageGet\", \"VKWebAppStorageGetKeys\", \"VKWebAppStorageSet\", \"VKWebAppFlashGetInfo\", \"VKWebAppSubscribeStoryApp\"], l && !t ? [\"VKWebAppResizeWindow\", \"VKWebAppAddToMenu\", \"VKWebAppShowSubscriptionBox\", \"VKWebAppShowInstallPushBox\", \"VKWebAppGetFriends\"] : []),\n      A = n ? window.AndroidBridge : void 0,\n      w = f ? window.webkit.messageHandlers : void 0;\n\n  function o(e, n) {\n    var t = n || {\n      bubbles: !1,\n      cancelable: !1,\n      detail: void 0\n    },\n        o = document.createEvent(\"CustomEvent\");\n    return o.initCustomEvent(e, !!t.bubbles, !!t.cancelable, t.detail), o;\n  }\n\n  \"undefined\" == typeof window || window.CustomEvent || (window.CustomEvent = (o.prototype = Event.prototype, o));\n\n  var r = function (t) {\n    var p = void 0,\n        i = [];\n\n    function e(e) {\n      i.push(e);\n    }\n\n    function n() {\n      return f || s;\n    }\n\n    function o() {\n      return l && window.parent !== window;\n    }\n\n    function r() {\n      return n() || o();\n    }\n\n    \"undefined\" != typeof window && \"addEventListener\" in window && window.addEventListener(b, function (n) {\n      if (f || s) return a(i).map(function (e) {\n        return e.call(null, n);\n      });\n\n      if (l && n && n.data) {\n        var e = n.data,\n            t = e.type,\n            o = e.data,\n            r = e.frameId;\n        t && \"VKWebAppSettings\" === t ? p = r : a(i).map(function (e) {\n          return e({\n            detail: {\n              type: t,\n              data: o\n            }\n          });\n        });\n      }\n    });\n    var u = d(function (e, n) {\n      A && A[e] ? A[e](JSON.stringify(n)) : w && w[e] && \"function\" == typeof w[e].postMessage ? w[e].postMessage(n) : l && parent.postMessage({\n        handler: e,\n        params: n,\n        type: \"vk-connect\",\n        webFrameId: p,\n        connectVersion: t\n      }, \"*\");\n    }, e);\n    return {\n      send: u,\n      sendPromise: u,\n      subscribe: e,\n      unsubscribe: function (e) {\n        var n = i.indexOf(e);\n        -1 < n && i.splice(n, 1);\n      },\n      supports: function (e) {\n        return s ? !(!A || \"function\" != typeof A[e]) : f ? !(!w || !w[e] || \"function\" != typeof w[e].postMessage) : l && -1 < c.indexOf(e);\n      },\n      isWebView: n,\n      isIframe: o,\n      isEmbedded: r,\n      isStandalone: function () {\n        return !r();\n      }\n    };\n  }(\"2.3.0\");\n\n  e.applyMiddleware = function e() {\n    for (var o = [], n = 0; n < arguments.length; n++) o[n] = arguments[n];\n\n    return o.includes(void 0) || o.includes(null) ? e.apply(void 0, o.filter(function (e) {\n      return \"function\" == typeof e;\n    })) : function (t) {\n      if (0 === o.length) return t;\n      var e,\n          n = {\n        subscribe: t.subscribe,\n        send: function () {\n          for (var e = [], n = 0; n < arguments.length; n++) e[n] = arguments[n];\n\n          return t.send.apply(t, e);\n        }\n      };\n      return e = o.filter(function (e) {\n        return \"function\" == typeof e;\n      }).map(function (e) {\n        return e(n);\n      }).reduce(function (n, t) {\n        return function (e) {\n          return n(t(e));\n        };\n      })(t.send), u(u({}, t), {\n        send: e\n      });\n    };\n  }, e.default = r, Object.defineProperty(e, \"__esModule\", {\n    value: !0\n  });\n});","map":{"version":3,"sources":["/home/ubuntu/VK/node_modules/@vkontakte/vk-bridge/dist/index.umd.js"],"names":["e","n","exports","module","define","amd","self","vkBridge","u","Object","assign","t","o","arguments","length","r","prototype","hasOwnProperty","call","apply","a","Array","p","i","d","current","next","add","resolve","reject","detail","data","request_id","indexOf","getOwnPropertySymbols","propertyIsEnumerable","Promise","window","s","Boolean","AndroidBridge","f","webkit","messageHandlers","VKWebAppClose","l","test","location","search","b","c","A","w","bubbles","cancelable","document","createEvent","initCustomEvent","CustomEvent","Event","push","parent","addEventListener","map","type","frameId","JSON","stringify","postMessage","handler","params","webFrameId","connectVersion","send","sendPromise","subscribe","unsubscribe","splice","supports","isWebView","isIframe","isEmbedded","isStandalone","applyMiddleware","includes","filter","reduce","default","defineProperty","value"],"mappings":"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","sourcesContent":["!function(e,n){\"object\"==typeof exports&&\"undefined\"!=typeof module?n(exports):\"function\"==typeof define&&define.amd?define([\"exports\"],n):n((e=e||self).vkBridge={})}(this,function(e){\"use strict\";var u=function(){return(u=Object.assign||function(e){for(var n,t=1,o=arguments.length;t<o;t++)for(var r in n=arguments[t])Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r]);return e}).apply(this,arguments)};function a(){for(var e=0,n=0,t=arguments.length;n<t;n++)e+=arguments[n].length;var o=Array(e),r=0;for(n=0;n<t;n++)for(var p=arguments[n],i=0,u=p.length;i<u;i++,r++)o[r]=p[i];return o}function d(p,e){var o,r,i=(o={current:0,next:function(){return++this.current}},r={},{add:function(e,n){var t=null!=n?n:o.next();return r[t]=e,t},resolve:function(e,n,t){var o=r[e];o&&(t(n)?o.resolve(n):o.reject(n),r[e]=null)}});return e(function(e){if(e.detail&&e.detail.data&&\"request_id\"in e.detail.data){var n=e.detail.data,t=n.request_id,o=function(e,n){var t={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&n.indexOf(o)<0&&(t[o]=e[o]);if(null!=e&&\"function\"==typeof Object.getOwnPropertySymbols){var r=0;for(o=Object.getOwnPropertySymbols(e);r<o.length;r++)n.indexOf(o[r])<0&&Object.prototype.propertyIsEnumerable.call(e,o[r])&&(t[o[r]]=e[o[r]])}return t}(n,[\"request_id\"]);t&&i.resolve(t,o,function(e){return!(\"error_type\"in e)})}}),function(o,r){return void 0===r&&(r={}),new Promise(function(e,n){var t=i.add({resolve:e,reject:n},r.request_id);p(o,u(u({},r),{request_id:t}))})}}var n=\"undefined\"!=typeof window,s=Boolean(n&&window.AndroidBridge),f=Boolean(n&&window.webkit&&window.webkit.messageHandlers&&window.webkit.messageHandlers.VKWebAppClose),l=n&&!s&&!f,t=l&&/(^\\?|&)vk_platform=mobile_web(&|$)/.test(location.search),b=l?\"message\":\"VKWebAppEvent\",c=a([\"VKWebAppInit\",\"VKWebAppGetCommunityAuthToken\",\"VKWebAppAddToCommunity\",\"VKWebAppAddToHomeScreenInfo\",\"VKWebAppClose\",\"VKWebAppCopyText\",\"VKWebAppGetUserInfo\",\"VKWebAppSetLocation\",\"VKWebAppSendToClient\",\"VKWebAppGetClientVersion\",\"VKWebAppGetPhoneNumber\",\"VKWebAppGetEmail\",\"VKWebAppGetGroupInfo\",\"VKWebAppGetGeodata\",\"VKWebAppGetCommunityToken\",\"VKWebAppSetTitle\",\"VKWebAppGetAuthToken\",\"VKWebAppCallAPIMethod\",\"VKWebAppJoinGroup\",\"VKWebAppLeaveGroup\",\"VKWebAppAllowMessagesFromGroup\",\"VKWebAppDenyNotifications\",\"VKWebAppAllowNotifications\",\"VKWebAppOpenPayForm\",\"VKWebAppOpenApp\",\"VKWebAppShare\",\"VKWebAppShowWallPostBox\",\"VKWebAppScroll\",\"VKWebAppShowOrderBox\",\"VKWebAppShowLeaderBoardBox\",\"VKWebAppShowInviteBox\",\"VKWebAppShowRequestBox\",\"VKWebAppAddToFavorites\",\"VKWebAppShowCommunityWidgetPreviewBox\",\"VKWebAppShowStoryBox\",\"VKWebAppSendToClient\",\"VKWebAppStorageGet\",\"VKWebAppStorageGetKeys\",\"VKWebAppStorageSet\",\"VKWebAppFlashGetInfo\",\"VKWebAppSubscribeStoryApp\"],l&&!t?[\"VKWebAppResizeWindow\",\"VKWebAppAddToMenu\",\"VKWebAppShowSubscriptionBox\",\"VKWebAppShowInstallPushBox\",\"VKWebAppGetFriends\"]:[]),A=n?window.AndroidBridge:void 0,w=f?window.webkit.messageHandlers:void 0;function o(e,n){var t=n||{bubbles:!1,cancelable:!1,detail:void 0},o=document.createEvent(\"CustomEvent\");return o.initCustomEvent(e,!!t.bubbles,!!t.cancelable,t.detail),o}\"undefined\"==typeof window||window.CustomEvent||(window.CustomEvent=(o.prototype=Event.prototype,o));var r=function(t){var p=void 0,i=[];function e(e){i.push(e)}function n(){return f||s}function o(){return l&&window.parent!==window}function r(){return n()||o()}\"undefined\"!=typeof window&&\"addEventListener\"in window&&window.addEventListener(b,function(n){if(f||s)return a(i).map(function(e){return e.call(null,n)});if(l&&n&&n.data){var e=n.data,t=e.type,o=e.data,r=e.frameId;t&&\"VKWebAppSettings\"===t?p=r:a(i).map(function(e){return e({detail:{type:t,data:o}})})}});var u=d(function(e,n){A&&A[e]?A[e](JSON.stringify(n)):w&&w[e]&&\"function\"==typeof w[e].postMessage?w[e].postMessage(n):l&&parent.postMessage({handler:e,params:n,type:\"vk-connect\",webFrameId:p,connectVersion:t},\"*\")},e);return{send:u,sendPromise:u,subscribe:e,unsubscribe:function(e){var n=i.indexOf(e);-1<n&&i.splice(n,1)},supports:function(e){return s?!(!A||\"function\"!=typeof A[e]):f?!(!w||!w[e]||\"function\"!=typeof w[e].postMessage):l&&-1<c.indexOf(e)},isWebView:n,isIframe:o,isEmbedded:r,isStandalone:function(){return!r()}}}(\"2.3.0\");e.applyMiddleware=function e(){for(var o=[],n=0;n<arguments.length;n++)o[n]=arguments[n];return o.includes(void 0)||o.includes(null)?e.apply(void 0,o.filter(function(e){return\"function\"==typeof e})):function(t){if(0===o.length)return t;var e,n={subscribe:t.subscribe,send:function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return t.send.apply(t,e)}};return e=o.filter(function(e){return\"function\"==typeof e}).map(function(e){return e(n)}).reduce(function(n,t){return function(e){return n(t(e))}})(t.send),u(u({},t),{send:e})}},e.default=r,Object.defineProperty(e,\"__esModule\",{value:!0})});\n"]},"metadata":{},"sourceType":"script"}