{"version":3,"sources":["App.js","index.js"],"names":["App","props","parseQueryString","string","slice","split","map","queryParam","kvp","key","value","reduce","query","go","e","setState","activePanel","currentTarget","dataset","to","state","activeStory","fetchedUser","userEmail","userId","userFirstName","userLastName","userInfo","userSign","appId","groupId","onStoryChange","bind","setUserEmail","setUserId","setUserFirstName","setUserLastName","this","story","bridge","send","then","data","email","catch","error","id","first_name","last_name","queryParams","window","location","search","hashParams","hash","tabbar","onClick","selected","data-story","label","text","Object","keys","description","style","color","React","Component","subscribe","console","log","bdate","country","title","city","photo_100","photo_200","photo_max_orig","sex","event","detail","type","code_data","error_type","error_data","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.d539d3cd.chunk.js","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport bridge from '@vkontakte/vk-bridge';\nimport View from '@vkontakte/vkui/dist/components/View/View';\nimport ScreenSpinner from '@vkontakte/vkui/dist/components/ScreenSpinner/ScreenSpinner';\nimport '@vkontakte/vkui/dist/vkui.css';\nimport {Epic, Cell, List, Panel, PanelHeader, Tabbar, TabbarItem } from '@vkontakte/vkui';\nimport {Icon28NewsfeedOutline, Icon28SearchOutline, Icon28MessageOutline, Icon28Notifications, Icon28More, Icon28ServicesOutline, Icon28ClipOutline, Icon28UserCircleOutline} from '@vkontakte/icons';\nimport Home from './panels/Home';\nimport Icon28GearCircleFillGray from '@vkontakte/icons/dist/28/gear_circle_fill_gray';\nimport Icon28SettingsOutline from '@vkontakte/icons/dist/28/settings_outline';\nimport Icon28Users3Outline from '@vkontakte/icons/dist/28/users_3_outline';\n\nclass App extends React.Component {\n  constructor (props) {\n    super(props);\n\n    this.state = {\n      activeStory: 'profile',\n      activePanel : 'defaultPanel',\n      fetchedUser : null,\n      userEmail : null,\n      userId : null,\n      userFirstName : null,\n      userLastName : null,\n      userInfo : null,\n      userSign : null,\n      appId : null,\n      groupId : null,\n    };\n    this.onStoryChange = this.onStoryChange.bind(this);\n    this.setUserEmail = this.setUserEmail.bind(this);\n    this.setUserId = this.setUserId.bind(this);\n    this.setUserFirstName = this.setUserFirstName.bind(this);\n    this.setUserLastName = this.setUserLastName.bind(this);\n  }\n\n  onStoryChange (e) {\n    this.setState({ activeStory: e.currentTarget.dataset.story })\n  }\n  setUserId(userId) {\n    this.setState({ userId });\n  }\n  setUserEmail(userEmail) {\n    this.setState({ userEmail });\n  }\n  setUserFirstName(userFirstName) {\n    this.setState({ userFirstName });\n  }\n  setUserLastName(userLastName) {\n    this.setState({ userLastName });\n  }\n  parseQueryString = (string) => {\n    return string.slice(1).split('&')\n      .map((queryParam) => {\n        let kvp = queryParam.split('=');\n        return {key: kvp[0], value: kvp[1]}\n      })\n      .reduce((query, kvp) => {\n        query[kvp.key] = kvp.value;\n        return query\n      }, {})\n  };\ncomponentDidMount() {\n  bridge\n    .send('VKWebAppGetEmail')\n    .then(data => this.setUserEmail(data.email))\n    .catch(error => error);\n  bridge\n    .send('VKWebAppGetUserInfo')\n    .then(data => {\n      this.setUserId(data.id)\n      this.setUserFirstName(data.first_name)\n      this.setUserLastName(data.last_name)\n\n    })\n    .catch(error => error);\n}\ngo = (e) => {\n  this.setState({ activePanel: e.currentTarget.dataset.to })\n};\n\n\n  render () {\n    const queryParams = this.parseQueryString(window.location.search);\n    const hashParams = this.parseQueryString(window.location.hash);\n    return (\n      <Epic activeStory={this.state.activeStory} tabbar={\n        <Tabbar>\n          <TabbarItem\n            onClick={this.onStoryChange}\n            selected={this.state.activeStory === 'feed'}\n            data-story=\"feed\"\n            label=\"3\"\n            text=\"Новости\"\n          ><Icon28NewsfeedOutline /></TabbarItem>\n          <TabbarItem\n            onClick={this.onStoryChange}\n            selected={this.state.activeStory === 'alerts'}\n            data-story=\"alerts\"\n            label=\"7\"\n            text=\"Уведомления\"\n          ><Icon28Notifications /></TabbarItem>\n          <TabbarItem\n            onClick={this.onStoryChange}\n            selected={this.state.activeStory === 'groups'}\n            data-story=\"groups\"\n            label=\"12\"\n            text=\"Группы\"\n          ><Icon28Users3Outline /></TabbarItem>\n          <TabbarItem\n            onClick={this.onStoryChange}\n            selected={this.state.activeStory === 'settings'}\n            data-story=\"settings\"\n            text=\"Настройки\"\n          ><Icon28SettingsOutline /></TabbarItem>\n          <TabbarItem\n            onClick={this.onStoryChange}\n            selected={this.state.activeStory === 'profile'}\n            data-story=\"profile\"\n            text=\"Профиль\"\n          ><Icon28UserCircleOutline /></TabbarItem>\n        </Tabbar>\n      }>\n        <View id=\"feed\" activePanel=\"feed\">\n          <Panel id=\"feed\">\n            <PanelHeader>Новости</PanelHeader>\n            <List>\n              {Object.keys(queryParams).map((key) => {\n                let value = queryParams[key];\n                return <Cell description={key}>{value ? value : <span style={{color: 'red'}}>-</span>}</Cell>;\n              })}\n            </List>\n            <List>\n              {Object.keys(hashParams).map((key) => {\n                let value = hashParams[key];\n                return <Cell description={key}>{value ? value : <span style={{color: 'red'}}>-</span>}</Cell>;\n              })}\n            </List>\n          </Panel>\n        </View>\n        <View id=\"alerts\" activePanel=\"alerts\">\n          <Panel id=\"alerts\">\n            <PanelHeader>Уведомления</PanelHeader>\n          </Panel>\n        </View>\n        <View id=\"groups\" activePanel=\"groups\">\n          <Panel id=\"groups\">\n            <PanelHeader>Сообщества</PanelHeader>\n          </Panel>\n        </View>\n        <View id=\"settings\" activePanel=\"settings\">\n          <Panel id=\"settings\">\n            <PanelHeader>Настройки</PanelHeader>\n          </Panel>\n        </View>\n        <View id=\"profile\" activePanel=\"profile\">\n          <Panel id=\"profile\">\n            <PanelHeader>Профиль</PanelHeader>\n            <p>E-mail: {this.state.userEmail} </p>\n            <p>ID: {this.state.userId} </p>\n            <p>Name: {this.state.userFirstName} </p>\n            <p>Surname: {this.state.userLastName} </p>\n          </Panel>\n        </View>\n      </Epic>\n    )\n  }\n}\n\nexport default App;","import \"core-js/features/map\";\nimport \"core-js/features/set\";\nimport React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport bridge from \"@vkontakte/vk-bridge\";\nimport App from \"./App\";\n\n// Init VK  Mini App\n// Sends event to client\nbridge.send(\"VKWebAppInit\");\n// Subscribes to event, sended by client\nbridge.subscribe(e => console.log(e));\n//----------------------------\n// Sending event to client\nbridge\n  .send('VKWebAppGetEmail')\n  .then(data => {\n// Handling received data\n    console.log(data.email);\n  })\n  .catch(error => {\n    // Handling an error\n  });\n//----------------------------\nbridge\n  .send('VKWebAppGetUserInfo')\n  .then(data => {\n    // Handling received data\n    console.log(data.first_name);\n    const vkname = data.first_name;\n    console.log(data.last_name);\n    console.log(data.id);\n    console.log(data.bdate);\n    console.log(data.country.title);\n    console.log(data.city.title);\n    console.log(data.photo_100);\n    console.log(data.photo_200);\n    console.log(data.photo_max_orig);\n    console.log(data.sex);\n  })\n  .catch(error => {\n    // Handling an error\n  });\n\n// Subscribing to receiving events\nbridge.subscribe(event => {\n  if (!event.detail) {\n    return;\n  }\n\n  const { type, data } = event.detail;\n\n  if (type === 'VKWebAppOpenCodeReaderResult') {\n    // Reading result of the Code Reader\n    console.log(data.code_data);\n  }\n\n  if (type === 'VKWebAppOpenCodeReaderFailed') {\n    // Catching the error\n    console.log(data.error_type, data.error_data);\n  }\n});\n\n// Sending method\nbridge.send('VKWebAppOpenCodeReader', {});  \n\n//----------------------------\n//Unsubscribes a function from events listening\n\n//**Parameters**\n\n//- `fn` _required_ Event subscribed function\n\n// **Example**\n\n// ```js\n//const fn = event => {\n  // ...\n//};\n\n// Subscribing\n//bridge.subscribe(fn);\n\n// Unsubscribing\n//bridge.unsubscribe(fn);\n// ``` \n\n//Checks if an event is available on the current device\n\n//**Parameters**\n\n//- `method` _required_ The VK Bridge method\n\n//### `bridge.isWebView()`\n\n//Returns `true` if VK Bridge is running in mobile app, or `false` if not\n\n//### `bridge.isIframe()`\n\n//Returns `true` if VK Bridge is running in iframe, or `false` if not\n\n//### `bridge.isEmbedded()`\n\n//Returns `true` if VK Bridge is running in embedded app, or `false` if not\n\n//### `bridge.isStandalone()`\n\n//Returns `true` if VK Bridge is running in standalone app, or `false` if not\n\n//## Middleware API\n\n//_Middlewares_ are pieces of code that intercept and process data between sending and receiving. Thus, by creating middlewares, you can easily log data, modify data before sending it, talking to an asynchronous API, etc. If you've used Redux, you were also probably already familiar with the concept—a similar is used here.\n\n//### `applyMiddleware(middleware1, ..., middlewareN)`\n\n//Creates the VK Bridge enhancer that applies middleware to the `send`\n//method. This is handy for a variety of task such as logging every sent\n//event. Returns the VK Bridge enhancer applying the middleware.\n\n//**Parameters**\n\n//- `middlewareN` A middleware to be applied\n\n//**Example**\n\n// ```js\n// import bridge, { applyMiddleware } from '@vkontakte/vk-bridge';\n\n// Logs the result of each sent event\n// const logger = ({ send, subscribe }) => next => async (method, props) => {\n//  const result = await next(method, props);\n//  console.log(result);\n//  return result;\n//};\n\n//const enhancedBridge = applyMiddleware(logger)(bridge);\n// ```\n// Use VK Bridge in browser\n// ```html\n//<script src=\"https://unpkg.com/@vkontakte/vk-bridge/dist/browser.min.js\"></script>\n\n//<script>\n  // Sends event to client\n  //vkBridge.send('VKWebAppInit');\n//</script>\n\n\nbridge.send('VKWebAppGetAuthToken', {\"app_id\": 7658421, \"scope\": \"friends, photos, notify, video, wall, offline, groups, notifications, stats, email, market\"})\nReactDOM.render(<App />, document.getElementById(\"root\"));\nif (process.env.NODE_ENV === \"development\") {\n  import(\"./eruda\").then(({ default: eruda }) => {}); //runtime download\n}\n\nif (module.hot) {\nmodule.hot.accept();\n}"],"sourceRoot":""}